class Solution {
public:
    int maxProduct(vector<int>& nums) {
        int best_sum = nums[0];
        int a = nums[0], b = nums[0];
        for (int i = 1; i < nums.size(); i++) {
            if (nums[i] == 0) b = 0;
            if (nums[i] < 0) {
                swap(a,b);
            }
            a = max(nums[i], nums[i] * a);
            b = min(nums[i], nums[i] * b);
            best_sum = max(best_sum, a);
        }
        return best_sum;
    }
};